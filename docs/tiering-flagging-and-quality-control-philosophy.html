<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Tiering, flagging, and quality control philosophy | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Tiering, flagging, and quality control philosophy | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Tiering, flagging, and quality control philosophy | _main.knit" />
  
  
  

<meta name="author" content="ROSSyndicate" />


<meta name="date" content="2024-11-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="download-process.html"/>
<link rel="next" href="chlorophyll-a-chla-harmonization-process.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> AquaMatch data harmonization process</a></li>
<li class="chapter" data-level="2" data-path="technical-details.html"><a href="technical-details.html"><i class="fa fa-check"></i><b>2</b> Technical details</a></li>
<li class="chapter" data-level="3" data-path="download-process.html"><a href="download-process.html"><i class="fa fa-check"></i><b>3</b> Download process</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="download-process.html"><a href="download-process.html#catalogue-existing-data"><i class="fa fa-check"></i><b>3.0.1</b> Catalogue existing data</a></li>
<li class="chapter" data-level="3.0.2" data-path="download-process.html"><a href="download-process.html#maps-of-data-spread"><i class="fa fa-check"></i><b>3.0.2</b> Maps of data spread</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html"><i class="fa fa-check"></i><b>4</b> Tiering, flagging, and quality control philosophy</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#handling-na-values"><i class="fa fa-check"></i><b>4.1</b> Handling <code>NA</code> values</a></li>
<li class="chapter" data-level="4.2" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#heterogenous-data"><i class="fa fa-check"></i><b>4.2</b> Heterogenous data</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#method-tiering"><i class="fa fa-check"></i><b>4.2.1</b> Method tiering</a></li>
<li class="chapter" data-level="4.2.2" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#field-flags"><i class="fa fa-check"></i><b>4.2.2</b> Field flags</a></li>
<li class="chapter" data-level="4.2.3" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#depth-flags"><i class="fa fa-check"></i><b>4.2.3</b> Depth flags</a></li>
<li class="chapter" data-level="4.2.4" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#miscellaneous-flags"><i class="fa fa-check"></i><b>4.2.4</b> Miscellaneous flags</a></li>
<li class="chapter" data-level="4.2.5" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#time-and-date-handling"><i class="fa fa-check"></i><b>4.2.5</b> Time and date handling</a></li>
<li class="chapter" data-level="4.2.6" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#anonymization"><i class="fa fa-check"></i><b>4.2.6</b> Anonymization</a></li>
<li class="chapter" data-level="4.2.7" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#general-notes"><i class="fa fa-check"></i><b>4.2.7</b> General notes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tiering-flagging-and-quality-control-philosophy.html"><a href="tiering-flagging-and-quality-control-philosophy.html#simultaneous-records"><i class="fa fa-check"></i><b>4.3</b> Simultaneous records</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html"><i class="fa fa-check"></i><b>5</b> Chlorophyll <em>a</em> (chla) harmonization process</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#pre-harmonization-of-the-raw-chlorophyll-wqp-dataset"><i class="fa fa-check"></i><b>5.1</b> Pre-harmonization of the raw chlorophyll WQP dataset</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#missing-results"><i class="fa fa-check"></i><b>5.1.1</b> Missing results</a></li>
<li class="chapter" data-level="5.1.2" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#filter-status"><i class="fa fa-check"></i><b>5.1.2</b> Filter status</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#harmonization-ready-chlorophyll-dataset"><i class="fa fa-check"></i><b>5.2</b> Harmonization-ready chlorophyll dataset</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#filter-for-water-media"><i class="fa fa-check"></i><b>5.2.1</b> Filter for water media</a></li>
<li class="chapter" data-level="5.2.2" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#document-and-remove-fails"><i class="fa fa-check"></i><b>5.2.2</b> Document and remove fails</a></li>
<li class="chapter" data-level="5.2.3" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#clean-mdls"><i class="fa fa-check"></i><b>5.2.3</b> Clean MDLs</a></li>
<li class="chapter" data-level="5.2.4" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#clean-approximate-values"><i class="fa fa-check"></i><b>5.2.4</b> Clean approximate values</a></li>
<li class="chapter" data-level="5.2.5" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#clean-values-with-greater-than-data"><i class="fa fa-check"></i><b>5.2.5</b> Clean values with “greater than” data</a></li>
<li class="chapter" data-level="5.2.6" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#drop-unresolved-na-measurements"><i class="fa fa-check"></i><b>5.2.6</b> Drop unresolved NA measurements</a></li>
<li class="chapter" data-level="5.2.7" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#harmonize-record-units"><i class="fa fa-check"></i><b>5.2.7</b> Harmonize record units</a></li>
<li class="chapter" data-level="5.2.8" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#clean-depth-data"><i class="fa fa-check"></i><b>5.2.8</b> Clean depth data</a></li>
<li class="chapter" data-level="5.2.9" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#filter-and-tier-methods"><i class="fa fa-check"></i><b>5.2.9</b> Filter and tier methods</a></li>
<li class="chapter" data-level="5.2.10" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#flag-based-on-field-methods"><i class="fa fa-check"></i><b>5.2.10</b> Flag based on field methods</a></li>
<li class="chapter" data-level="5.2.11" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#miscellaneous-flag"><i class="fa fa-check"></i><b>5.2.11</b> Miscellaneous flag</a></li>
<li class="chapter" data-level="5.2.12" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#remove-unrealistic-values"><i class="fa fa-check"></i><b>5.2.12</b> Remove unrealistic values</a></li>
<li class="chapter" data-level="5.2.13" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#aggregate-simultaneous-records"><i class="fa fa-check"></i><b>5.2.13</b> Aggregate simultaneous records</a></li>
<li class="chapter" data-level="5.2.14" data-path="chlorophyll-a-chla-harmonization-process.html"><a href="chlorophyll-a-chla-harmonization-process.html#harmonized-chlorophyll-a"><i class="fa fa-check"></i><b>5.2.14</b> Harmonized chlorophyll a</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html"><i class="fa fa-check"></i><b>6</b> DOC harmonization process</a>
<ul>
<li class="chapter" data-level="6.1" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#pre-harmonization-of-the-raw-doc-wqp-dataset"><i class="fa fa-check"></i><b>6.1</b> Pre-harmonization of the raw doc WQP dataset</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#missing-results-1"><i class="fa fa-check"></i><b>6.1.1</b> Missing results</a></li>
<li class="chapter" data-level="6.1.2" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#filter-status-1"><i class="fa fa-check"></i><b>6.1.2</b> Filter status</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#harmonization-ready-doc-dataset"><i class="fa fa-check"></i><b>6.2</b> Harmonization-ready DOC dataset</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#filter-media-and-fractions"><i class="fa fa-check"></i><b>6.2.1</b> Filter media and fractions</a></li>
<li class="chapter" data-level="6.2.2" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#document-and-remove-fails-1"><i class="fa fa-check"></i><b>6.2.2</b> Document and remove fails</a></li>
<li class="chapter" data-level="6.2.3" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#clean-mdls-1"><i class="fa fa-check"></i><b>6.2.3</b> Clean MDLs</a></li>
<li class="chapter" data-level="6.2.4" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#clean-approximate-values-1"><i class="fa fa-check"></i><b>6.2.4</b> Clean approximate values</a></li>
<li class="chapter" data-level="6.2.5" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#clean-values-with-greater-than-data-1"><i class="fa fa-check"></i><b>6.2.5</b> Clean values with “greater than” data</a></li>
<li class="chapter" data-level="6.2.6" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#drop-unresolved-na-measurements-1"><i class="fa fa-check"></i><b>6.2.6</b> Drop unresolved NA measurements</a></li>
<li class="chapter" data-level="6.2.7" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#harmonize-record-units-1"><i class="fa fa-check"></i><b>6.2.7</b> Harmonize record units</a></li>
<li class="chapter" data-level="6.2.8" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#clean-depth-data-1"><i class="fa fa-check"></i><b>6.2.8</b> Clean depth data</a></li>
<li class="chapter" data-level="6.2.9" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#filter-and-tier-methods-1"><i class="fa fa-check"></i><b>6.2.9</b> Filter and tier methods</a></li>
<li class="chapter" data-level="6.2.10" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#flag-based-on-field-methods-1"><i class="fa fa-check"></i><b>6.2.10</b> Flag based on field methods</a></li>
<li class="chapter" data-level="6.2.11" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#miscellaneous-flag-1"><i class="fa fa-check"></i><b>6.2.11</b> Miscellaneous flag</a></li>
<li class="chapter" data-level="6.2.12" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#remove-unrealistic-values-1"><i class="fa fa-check"></i><b>6.2.12</b> Remove unrealistic values</a></li>
<li class="chapter" data-level="6.2.13" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#aggregate-simultaneous-records-1"><i class="fa fa-check"></i><b>6.2.13</b> Aggregate simultaneous records</a></li>
<li class="chapter" data-level="6.2.14" data-path="doc-harmonization-process.html"><a href="doc-harmonization-process.html#harmonized-doc"><i class="fa fa-check"></i><b>6.2.14</b> Harmonized DOC</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html"><i class="fa fa-check"></i><b>7</b> Secchi harmonization process</a>
<ul>
<li class="chapter" data-level="7.1" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#pre-harmonization-of-the-raw-secchi-wqp-dataset"><i class="fa fa-check"></i><b>7.1</b> Pre-harmonization of the raw Secchi WQP dataset</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#missing-results-2"><i class="fa fa-check"></i><b>7.1.1</b> Missing results</a></li>
<li class="chapter" data-level="7.1.2" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#filter-status-2"><i class="fa fa-check"></i><b>7.1.2</b> Filter Status</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#harmonization-ready-secchi-dataset"><i class="fa fa-check"></i><b>7.2</b> Harmonization-ready Secchi dataset</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#filter-for-water-media-1"><i class="fa fa-check"></i><b>7.2.1</b> Filter for water media</a></li>
<li class="chapter" data-level="7.2.2" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#document-and-remove-fails-2"><i class="fa fa-check"></i><b>7.2.2</b> Document and remove fails</a></li>
<li class="chapter" data-level="7.2.3" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#clean-special-characters"><i class="fa fa-check"></i><b>7.2.3</b> Clean special characters</a></li>
<li class="chapter" data-level="7.2.4" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#clean-values-with-less-than-data"><i class="fa fa-check"></i><b>7.2.4</b> Clean values with “less than” data</a></li>
<li class="chapter" data-level="7.2.5" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#clean-values-with-greater-than-data-2"><i class="fa fa-check"></i><b>7.2.5</b> Clean values with “greater than” data</a></li>
<li class="chapter" data-level="7.2.6" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#gap-filling-harmonized-values"><i class="fa fa-check"></i><b>7.2.6</b> Gap filling harmonized values</a></li>
<li class="chapter" data-level="7.2.7" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#drop-unresolved-na-measurements-2"><i class="fa fa-check"></i><b>7.2.7</b> Drop unresolved NA measurements</a></li>
<li class="chapter" data-level="7.2.8" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#harmonize-record-units-2"><i class="fa fa-check"></i><b>7.2.8</b> Harmonize record units</a></li>
<li class="chapter" data-level="7.2.9" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#clean-and-flag-bottom-depth-data"><i class="fa fa-check"></i><b>7.2.9</b> Clean and flag bottom depth data</a></li>
<li class="chapter" data-level="7.2.10" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#filter-methods"><i class="fa fa-check"></i><b>7.2.10</b> Filter methods</a></li>
<li class="chapter" data-level="7.2.11" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#tier-methods"><i class="fa fa-check"></i><b>7.2.11</b> Tier methods</a></li>
<li class="chapter" data-level="7.2.12" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#flag"><i class="fa fa-check"></i><b>7.2.12</b> Flag</a></li>
<li class="chapter" data-level="7.2.13" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#remove-unrealistic-values-2"><i class="fa fa-check"></i><b>7.2.13</b> Remove unrealistic values</a></li>
<li class="chapter" data-level="7.2.14" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#aggregate-simultaneous-records-2"><i class="fa fa-check"></i><b>7.2.14</b> Aggregate simultaneous records</a></li>
<li class="chapter" data-level="7.2.15" data-path="secchi-harmonization-process.html"><a href="secchi-harmonization-process.html#harmonized-secchi-disk-depth"><i class="fa fa-check"></i><b>7.2.15</b> Harmonized Secchi disk depth</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i><b>8</b> Notes</a></li>
<li class="chapter" data-level="9" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>9</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tiering-flagging-and-quality-control-philosophy" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Tiering, flagging, and quality control philosophy<a href="tiering-flagging-and-quality-control-philosophy.html#tiering-flagging-and-quality-control-philosophy" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The variety of data providers, parameters, and methods in the WQP
inevitably results in a heterogenous dataset that requires rigorous
quality control before analytical use. In this chapter, we detail the
general tiering, flagging, and quality control philosophy we apply
across all parameter groups.</p>
<div id="handling-na-values" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Handling <code>NA</code> values<a href="tiering-flagging-and-quality-control-philosophy.html#handling-na-values" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Columns related directly to the interoperability of data in the WQP,
specifically field and lab methodology and depth-related columns, often
contain many <code>NA</code>s in part due to inconsistent entry across data
providers. A highly restrictive filtering of the WQP that requires
completed data fields would result in very limited data, in part, due to
the prevalence of these <code>NA</code> values. Therefore, we built this pipeline
to resolve as many <code>NA</code>s as possible, but to also include <code>NA</code>s within
an “inclusive” data tier if all columns of interest are not resolvable.
Specifically, we retain <code>NA</code> values if removing those <code>NA</code> records would
drop 10% or more of the available data.</p>
</div>
<div id="heterogenous-data" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Heterogenous data<a href="tiering-flagging-and-quality-control-philosophy.html#heterogenous-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In addition to <code>NA</code> values, WQP entries can be heterogenous for reasons
such as:</p>
<ul>
<li>Having a variety of analytical methods with different levels of
precision and accuracy that are used to quantify the same parameter</li>
<li>Having a variety of sampling methods used to acquire the same
parameter with varying levels of interoperability</li>
<li>Having a variety of names or descriptions that represent the same
analytical or sampling method across different organizations</li>
<li>Having information relevant to assessing data reliability or method
choice spread across multiple columns
<ul>
<li>Containing observations with sample collection methods and
analytical methods that are incompatible</li>
<li>Having data with differing levels of meta data</li>
</ul></li>
</ul>
<p>In order to control for some of this variation and provide end-users
with something more readily navigable we have incorporated several tiers
and flagging systems into the AquaSat v2 dataset:</p>
<ul>
<li><strong>Method tiering</strong>: Tiers indicating the veracity of data based on the
method used to acquire measurements, thereby allowing for the
identification of self-similar samples</li>
<li><strong>Field flags</strong>: Flags typically indicating whether the sample
collection method is consistent with the analytical method. When there
is no analytical aspect to the parameter (e.g., secchi disk depth)
this column provides additional information that may be helpful for
interpretation of the value given any field comments or methodological
differences in data collection reported in the WQP entry. Given these
differences, flag values and their meaning may differ by parameter and
as a result, flag values will be explained in the documentation for
each parameter</li>
<li><strong>Depth flags</strong>: Flags indicating the type of water sampling depth
measurement or completeness of the measurement</li>
<li><strong>Miscellaneous flags</strong>: Flags that will vary in meaning and use by
parameter. Some variables will not use them</li>
</ul>
<div id="method-tiering" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Method tiering<a href="tiering-flagging-and-quality-control-philosophy.html#method-tiering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>ResultAnalyticalMethod.MethodName</code> column from the WQP is often the
primary column we use for determining which tier each record falls
within. Details on how each parameter’s methods were sorted into tiers
can be found in its corresponding harmonization chapter.</p>
<p>The primary purpose of our tiering is to determine the reliability and
accuracy of each analytical method across data providers and throughout
time for each parameter in the AquaSat v2 dataset. We developed the
following categories, which are represented in the <code>tier</code> column of the
final dataset:</p>
<ul>
<li><strong>Tier 0: Restrictive.</strong> Data that are verifiably self-similar across
organizations and time-periods and can be considered highly reliable</li>
<li><strong>Tier 1: Narrowed.</strong> Data that we have good reason to believe are
self-similar, but for which we can’t verify full compatibility across
data providers</li>
<li><strong>Tier 2: Inclusive.</strong> Data that are assumed to be reliable and are
harmonized to our best ability given the information available from
the data provider. This tier includes <code>NA</code> or non-resolvable
descriptions for the analytical method, which often make up the
majority of method descriptions for any given parameter. Because this
tier represents many analytical methods, direct compatibility between
samples is not guaranteed.</li>
</ul>
</div>
<div id="field-flags" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Field flags<a href="tiering-flagging-and-quality-control-philosophy.html#field-flags" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>field_flag</code> column is used to check if the sample collection method
(<code>SampleCollectionMethod.MethodName</code>) is reasonable (flag = 0), suspect
(flag = 1), or inconclusive (flag = 2). “Reasonable” flags mean that the
sample collection or observation method and the analytical method are in
harmony with one another. “Suspect” flags are assigned when the sample
collection method description isn’t consistent with what would be
expected given the <code>characteristicName</code> and the
<code>ResultAnalyticalMethod.MethodName</code> for a given record. “Inconclusive”
or unknown flags are assigned to records with “inclusive” tiers because
these tiers include values such as <code>NA</code>, where it’s typically impossible
to determine the appropriateness of a collection method for the sample
record. The relationship between field flags and tiers will vary by
parameter; thus, each harmonization chapter contains specific
information for these different cases.</p>
</div>
<div id="depth-flags" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Depth flags<a href="tiering-flagging-and-quality-control-philosophy.html#depth-flags" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are four columns that explicitly contain depth information for a
given WQP entry, all of which contain a variety of measurement units.
Below is a list of the four columns and their definitions according to
the <a href="https://rconnect.usgs.gov/dataRetrieval/reference/readWQPqw.html">{dataRetrieval} package
documentation</a>.</p>
<ol style="list-style-type: decimal">
<li><code>ActivityDepthHeightMeasure.MeasureValue</code>: “A measurement of the
vertical location (measured from a reference point) at which an
activity occurred.”</li>
<li><code>ResultDepthHeightMeasure.MeasureValue</code>: “A measurement of the
vertical location (measured from a reference point) at which a
result occurred.” <em>Only in STORET</em></li>
<li><code>ActivityTopDepthHeightMeasure.MeasureValue</code>: “A measurement of the
upper vertical location of a vertical location range (measured from
a reference point) at which an activity occurred.”</li>
<li><code>ActivityBottomDepthHeightMeasure.MeasureValue</code>: “A measurement of
the lower vertical location of a vertical location range (measured
from a reference point) at which an activity occurred.”</li>
</ol>
<p>Each of the above columns has a corresponding column containing the <a href="https://rconnect.usgs.gov/dataRetrieval/reference/readWQPqw.html">the
associated unit used in measuring the
item</a>:</p>
<ol style="list-style-type: decimal">
<li><code>ActivityDepthHeightMeasure.MeasureUnitCode</code></li>
<li><code>ResultDepthHeightMeasure.MeasureUnitCode</code></li>
<li><code>ActivityTopDepthHeightMeasure.MeasureUnitCode</code></li>
<li><code>ActivityBottomDepthHeightMeasure.MeasureUnitCode</code></li>
</ol>
<div id="pre-processing" class="section level4 hasAnchor" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> Pre-processing<a href="tiering-flagging-and-quality-control-philosophy.html#pre-processing" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Prior to assigning the <code>depth_flag</code> we complete a few pre-processing
steps:</p>
<ol style="list-style-type: decimal">
<li>Convert the following character values to an explicit <code>NA</code>: “NA”,
“999”, “-999”, “9999”, “-9999”, “-99”, “99”, “NaN”</li>
<li>Convert depths in all four columns to meters from the depth unit
listed by the data provider</li>
<li>Create a single “discrete” sample depth column using a combination
of the <code>ActivityDepthHeightMeasure.MeasureValue</code> and
<code>ResultDepthHeightMeasure.MeasureValue</code> columns. We use
<code>ActivityDepth</code> value when <code>ResultDepth</code> value is missing, and
<code>ResultDepth</code> when <code>ActivityDepth</code> is missing. If both columns have
values but disagree we use an average of the two.</li>
</ol>
<p>This pre-processing results in three “harmonized” columns reporting
water sampling depth values in meters:
<code>harmonized_discrete_depth_value</code>, <code>harmonized_top_depth_value</code>,
<code>harmonized_bottom_depth_value</code>.</p>
<p>Sample depth flags are assigned using the harmonized depth columns that
result from the pre-processing steps above. If the record has no depth
listed it is assigned a <code>depth_flag</code> of 0. A record with only discrete
depth listed in the <code>harmonized_discrete_depth_value</code> is given a
<code>depth_flag</code> of 1. A record with top and/or bottom depth
(<code>harmonized_top_depth_value</code>, <code>harmonized_bottom_depth_value</code>),
indicating an integrated sample, is assigned a <code>depth_flag</code> of 2, and
any combination of discrete + top and/or bottom depths is assigned a
<code>depth_flag</code> of 3, since the sample depth(s) can not be reconciled with
certainty.</p>
</div>
</div>
<div id="miscellaneous-flags" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Miscellaneous flags<a href="tiering-flagging-and-quality-control-philosophy.html#miscellaneous-flags" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>misc_flag</code> column is included as a flexible flag column in order to
note important information that isn’t covered by the tiering and flags
defined above. Some parameters, like chlorophyll <em>a</em>, will not use this
column at all and will therefore just contain <code>NA</code> values in places of
flags. Values and their meaning will differ by parameter and as a
result, flag values will be explained in the documentation for each
parameter.</p>
</div>
<div id="time-and-date-handling" class="section level3 hasAnchor" number="4.2.5">
<h3><span class="header-section-number">4.2.5</span> Time and date handling<a href="tiering-flagging-and-quality-control-philosophy.html#time-and-date-handling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Time and date data are provided inconsistently in the WQP, so we have a
standardized process for harmonizing these data to provide AquaSat users
a consistent date-time column across all parameters.</p>
<p>We have designed a function, <code>fill_date_time()</code>, to create harmonized
date and time columns before the broader data harmonization process. It
adds the columns <code>harmonized_tz</code> (time zone as GMT offset),
<code>harmonized_local_time</code> (local date time relative to GMT offset), and
<code>harmonized_utc</code> (date time reported as time in UTC) to the dataset. The
function first transforms site-specific data into a unified geographic
coordinate reference system and then looks up the local time zone for
each monitoring site in the dataset using latitude and longitude with
the <code>lutz::tz_lookup()</code> function. This spatially-acquired time zone data
is temporarily stored in the <code>fetched_tz</code> column. The <code>harmonized_tz</code>
column is then generated using any timezones provided in
<code>ActivityStartTime.TimeZoneCode</code>, while filling in gaps in timezone data
with those identified using <code>fetched_tz</code>.</p>
<p>We then create the <code>harmonized_local_time</code> column by combining
<code>ActivityStartDate</code> and <code>ActivityStartTime.Time</code>. If
<code>ActivityStartTime.Time</code> is <code>NA</code> or <code>"00:00:00"</code> we instead use
<code>"11:59:59"</code> in <code>harmonized_local_time</code>. Very few, if any, records
contain this exact time stamp, so it can be used as a proxy to filter or
flag “synthetic” sampling times if desired by the end user. Note that
when we insert <code>"11:59:59"</code> <strong>and</strong> the <code>ActivityStartTime.TimeZoneCode</code>
was provided in UTC or GMT we treat <code>"11:59:59"</code> as <strong>local</strong> time and
use <code>fetched_tz</code> for <code>harmonized_tz</code>. But if the
<code>ActivityStartTime.Time</code> was not “synthetic” we convert the
UTC/GMT-based time into the local time determined by <code>fetched_tz</code>.</p>
<p>At this point the <code>harmonized_utc</code> column is created by converting the
contents of <code>harmonized_local_time</code> to UTC. Next, the <code>harmonized_tz</code>
column needs one final conversion: Up to this point its contents have
been a mix of location-based strings like <code>"America/Chicago"</code> or short
codes like <code>"CST"</code>. We translate both formats into a unified GMT offset
format where, e.g., <code>"CDT"</code> would be <code>"Etc/GMT+5"</code> and <code>"CST"</code> would be
<code>"Etc/GMT+6"</code>. Lastly, <code>harmonized_local_time</code> is formatted as a string
with no time zone stamp.</p>
<p>Note: <code>ActivityStartDateTime</code> is a UTC datetime column that is <a href="https://github.com/DOI-USGS/dataRetrieval/pull/319#issuecomment-280501805">added by
the {dataRetrieval}
package</a>.
In most, but not all, cases it will agree with <code>harmonized_utc</code>.
Differences in some values occur because 1) <code>ActivityStartDateTime</code> is
<code>NA</code> for <code>ActivityStartTime.TimeZoneCode</code> values of <code>NA</code>, <code>"AST"</code>,
<code>"ADT"</code>, <code>"GST"</code>, <code>"IDLE"</code>; or 2) we handle <code>"00:00:00"</code> values of
<code>ActivityStartTime.Time</code> the same as <code>NA</code>s whereas
<code>ActivityStartDateTime</code> does not.</p>
</div>
<div id="anonymization" class="section level3 hasAnchor" number="4.2.6">
<h3><span class="header-section-number">4.2.6</span> Anonymization<a href="tiering-flagging-and-quality-control-philosophy.html#anonymization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Occasionally, personally identifiable information is included in comment
fields in the WQP. We use a function, <code>anonymize_text()</code>, to find and
obscure phone numbers and email addresses. By default this is applied to
the <code>ActivityCommentText</code>, <code>ResultLaboratoryCommentText</code>, and
<code>ResultCommentText</code> columns and occurs after downloading the initial raw
WQP data.</p>
</div>
<div id="general-notes" class="section level3 hasAnchor" number="4.2.7">
<h3><span class="header-section-number">4.2.7</span> General notes<a href="tiering-flagging-and-quality-control-philosophy.html#general-notes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Generally speaking, we avoid further classification for any WQP
entry’s parameter methodology, tier, or flag unless there are at
least 1% of observations with the same unresolved text.</p></li>
<li><p>When building the <code>tier</code> and <code>_flag</code> columns we use temporary
columns with <code>_tag</code> in the name to track important qualities that
inform our tier and flag decisions. These columns are not exported
to the final product and are intended as open-ended tools for
tracking records, so they will vary greatly between each parameter’s
codebase.</p></li>
</ol>
</div>
</div>
<div id="simultaneous-records" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Simultaneous records<a href="tiering-flagging-and-quality-control-philosophy.html#simultaneous-records" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The WQP contains records that can be considered true duplicates and
others where multiple non-identical measurements are recorded at the
same time, place, and depth by the same organization. We deal with these
within each parameter’s harmonization step by taking the mean value from
simultaneous observations. We also report the coefficient of variation
and the total number of entries contributing to the mean in the
<code>harmonized_value_cv</code> and <code>harmonized_row_count</code> columns of the final
dataset.</p>
<p>This record aggregation is dealt with separately for each parameter so
that specific accommodations can be made based on their tiering and
value cleaning processes. Additionally, this step also requires us to
group the dataset by a subset of its original columns, necessarily
resulting in a reduced subset of columns in the final data product. To
aid in back-joining for advanced AquaSat users, we provide a
<code>subgroup_id</code> column identifying the grouping used to create the
aggregated mean and coefficient of variation values. The <code>subgroup_id</code>
is also present in an upstream, pre-aggregated dataset version that
contains all records prior to aggregation and the original WQP columns
along with the columns created in the harmonization steps. The upstream,
pre-aggregated dataset is the <code>p3_chla_preagg_grouped</code> pipeline target.</p>

<!-- Image settings -->
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="download-process.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chlorophyll-a-chla-harmonization-process.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
